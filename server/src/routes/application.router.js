const applicationController = require('../controllers/application.controller')
const { verifyToken, verifyTokenIsAdmin } = require('../middlewares')
const { checkData } = require('../middlewares/application.middleware')
const { upload } = require('../services/uploadImage.service')
const firebaseUpload = require('../services/FirebaseUpload.service')
module.exports = require('express').Router()
    .get('/list', verifyTokenIsAdmin, applicationController.getAll)
    .get('/detail', verifyToken, applicationController.getOne)
    .get('/get-by-jobid', verifyTokenIsAdmin, applicationController.getAllByJobId)
    .get('/get-by-userid', verifyToken, applicationController.getAllByUserrId)
    .get('/company', verifyTokenIsAdmin, applicationController.getAllApplicationByCompanyId)
    .post('/create', verifyToken, firebaseUpload.upload.single('cv'), firebaseUpload.fireBaseCvUpload, applicationController.create)